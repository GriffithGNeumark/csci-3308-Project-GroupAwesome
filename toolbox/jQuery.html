<html>
	<head>
		<script type="text/javascript" src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
			<link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
	</head>
	<body>
		<style>
			html {
				font-family: "Open Sans";
			}
			h2, .type {
				cursor: pointer;
			}
		</style>
		<h2 class="test">Show Cuisines</h2>
		<div class="container">
		<table>
			<tr>
				<td><b>Cuisines</b></td>
				<td><b>Dishes</b></td>
				<td><b>Calories</b></td>
			</tr>
			<tr>
				<td valign="top" id="cuisines"></td>
				<td valign="top" id="dishes"></td>
				<td valign="top" id="calories"></td>
			</tr>
		</table>
		</div>
		<script>
					
			function calorieContent(name){
				
			}
			$(function(){
				var jsonData;
				$(".test").click(function(){
					$.ajax({

						  // The 'type' property sets the HTTP method.
						  // A value of 'PUT' or 'DELETE' will trigger a preflight request.
						  type: 'GET',
						  dataType: "json",
						  // The URL to make the request to.
						  url: "https://api.delivery.com/merchant/search/delivery?client_id=Zjk0YzdhYzg3YTAyZmI1YTFkZjM0OGYyYWQwMDBmYzJl&address=199+Water+St+10038",
						  success: function(data) {
							jsonData = data;
							$("#cuisines").html("");
							$.each(data["cuisines"], function(value){
								$("#cuisines").append("<p class='type'>" + data["cuisines"][value]["name"] + "</p>");
							});
							
							$(".type").click(function(){
								$("#dishes").html("");
								var setOne = 0;
								for (j=0; j<jsonData['merchants'].length; j++){
									var data = jsonData['merchants'][j];
									var foodType = $(this).text();
									//console.log(foodType);
									if ($.inArray(foodType, data['summary']['cuisines'])>-1){
										console.log(JSON.stringify(data['summary']));
										$.each(data['summary']['recommended_items'], function(index, value){
											
											$("#dishes").append("<p class='dish_name'>" + value['name']  + "</p>");
										});
										
									}
								}
								$(".dish_name").click(function(){
									$.ajax({
										type: "GET",
										dataType: "json",
										url: "https://api.nutritionix.com/v1_1/search/" + $(this).text() +"?fields=item_name%2Citem_id%2Cbrand_name%2Cnf_calories%2Cnf_total_fat&appId=9921b233&appKey=4976263e72db8d8c4b4226fa0b0fdbd9",
										success: function(data){
											$("#calories").html(data['hits'][0]['fields']['nf_calories']);
											console.log(JSON.stringify(data))
										},
										error: function(data){
											console.log(data);
										}
									});
								});
								
							});
						  },
						  failure: function(data) {
							alert("failure");
						  },
						  error: function() {
							alert("error");
						  }
					});
					
				});
				
				
				
			});
		</script>
	</body>
<html>